<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion - Tool Grandma</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #000000; color: #ffffff; }
        .bg-purple-dark { background-color: #0a0a0a; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="max-w-md w-full bg-purple-dark p-8 rounded-2xl border border-white/5 shadow-2xl">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-black tracking-tighter mb-2">Tool-<span class="text-purple-500">GrandMA</span></h1>
            <p id="authTitle" class="text-gray-500 text-sm">Connectez-vous à votre espace technique</p>
        </div>

        <form id="authForm" class="space-y-4">
            <div>
                <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Nom d'utilisateur</label>
                <input type="text" id="username" required class="w-full bg-black border border-white/10 rounded-xl px-4 py-3 focus:border-purple-500 outline-none transition-all text-sm">
            </div>
            <div>
                <label class="block text-xs font-bold text-gray-500 uppercase mb-2">Mot de passe</label>
                <input type="password" id="password" required class="w-full bg-black border border-white/10 rounded-xl px-4 py-3 focus:border-purple-500 outline-none transition-all text-sm">
            </div>
            
            <button type="submit" id="submitBtn" class="w-full bg-purple-600 hover:bg-purple-500 text-white font-bold py-3 rounded-xl transition-all mt-4">
                Se connecter
            </button>
        </form>

        <div class="mt-6 text-center">
            <button id="toggleAuth" class="text-xs text-gray-500 hover:text-purple-400 transition-colors">
                Pas encore de compte ? Créer un compte
            </button>
        </div>
    </div>

    <script>
        const form = document.getElementById('authForm');
        const toggleBtn = document.getElementById('toggleAuth');
        const authTitle = document.getElementById('authTitle');
        const submitBtn = document.getElementById('submitBtn');
        let isLogin = true;

        toggleBtn.onclick = () => {
            isLogin = !isLogin;
            authTitle.textContent = isLogin ? "Connectez-vous à votre espace technique" : "Créez votre profil technique";
            submitBtn.textContent = isLogin ? "Se connecter" : "Créer le compte";
            toggleBtn.textContent = isLogin ? "Pas encore de compte ? Créer un compte" : "Déjà un compte ? Se connecter";
        };

        form.onsubmit = (e) => {
            e.preventDefault();
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;

            if (isLogin) {
                const storedUser = JSON.parse(localStorage.getItem(`user_${user}`));
                if (storedUser && storedUser.password === pass) {
                    localStorage.setItem('currentUser', user);
                    window.location.href = 'index.html';
                } else {
                    alert("Identifiants incorrects.");
                }
            } else {
                if (localStorage.getItem(`user_${user}`)) {
                    alert("Cet utilisateur existe déjà.");
                    return;
                }
                localStorage.setItem(`user_${user}`, JSON.stringify({ password: pass, apiKeys: [] }));
                alert("Compte créé avec succès !");
                isLogin = true;
                toggleBtn.click();
            }
        };
    </script>
</body>
</html>
